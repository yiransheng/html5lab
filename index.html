<!DOCTYPE html>

<html>
  <head>
    <title>Yiran's Html5 Lab</title>
    <link rel="stylesheet" type="text/css" href="assets/reset.css">
    <link rel="stylesheet" type="text/css" href="assets/style.css">
    <link rel="stylesheet" type="text/css" href="assets/prettify.css">
    <script type="text/javascript" src="assets/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/sheng.all.min.js"></script>
    <script type="text/javascript" src="js/ui.js"></script>
    <script type="text/javascript" src="assets/strftime.js"></script>
    <script type="text/javascript" src="assets/prettify.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
	var url_strings = window.location.href.split("#"), 
	    url_prefix = "",
	    app = url_strings.length>1 ? url_strings[url_strings.length-1] : "", 
	    app_src = url_prefix + app, 
	    Config = null, main;


	if (app_src.match(/[^//]+$/g)) {
	    app_src += "/"  
	};
        // loading config
	$.getJSON("index.json", function(res){
	    Config = res.DefaultConfig;
            // quick fail
	    if (!app){
	        $("#browse").removeClass("hide");
	        $("#container").addClass("hide");
	    } 
            $.getJSON(app_src+"config.json", function(res){
	        Sheng.extend(Config, res);
	        app = res.name || app;
		$("#info-intro pre").html(res.description);
		main(Config);
	    });
	});
	// tab view
	Sheng.create(Tab, {
            el: "#atab"
	}).init();


        // loading content and readying the everything 
	main = function(config) { 
	    Sheng.create(Stage, {
		el: "#stage", 
		src: app_src
	    }).init(config);
	    $.get(app_src+config.html, function(data){
	       $('#info-html').find("pre:first").text(data);   
	    }, "text");
	    $.get(app_src+config.script, function(data){
		$('#info-js').find("pre:first").text(data);   
	    }, "text");
	    $("#info-css").get(app_src+config.css, function(data){
	       $('#info-css').find("pre:first").text(data);   
	    }, "text");

	    $("pre").ajaxSuccess(function() {
	        prettyPrint();
	    });
	};

    });
    </script>

    <!--[if gte IE 9]>
    <style>
	.grad-head, header, .grad-bar{
	    filter: none;
	}
	</style>
    <![endif]-->
  </head>
  <body>
      <header class="shadow">
      <div class="wrapper">
	  <h1>Yiran's Html5 Experiments</h1>
	  <span></span><div class="nav"><a href="#">Home</a></div>
	  <span></span><div class="nav"><a href="http://www.yiransheng.com">Blog</a></div>
	  <span></span><div class="nav"><a href="http://github.com/yiransheng">Github</a></div>
	  <span></span><div class="nav"><a href="http://www.yiransheng.com/about">About me</a></div>
	  <span></span>
      </div>
      </header>
      <div id="browse" class="hide">

      </div>
      <div id="container">
	  <div id="atab" class="info-tab round-corner-five shadow">
	      <div class="sheng-ui-tabhead grad-head"> </div>
	      <div class="sheng-ui-tab" name="Description">
		  <div id="info-intro"><pre> </pre></div>
		  </div>
	      <div class="sheng-ui-tab" name="Html">
		  <div id="info-html"><pre class="prettyprint"> </pre></div>
		  </div>
	      <div class="sheng-ui-tab" name="JavaScript">
		  <div id="info-js"><pre class="prettyprint"> </pre></div>
		  </div>
	      <div class="sheng-ui-tab" name="CSS">
		  <div id="info-css"><pre class="prettyprint"> </pre></div>
		  </div>
	  </div>
	  <div id="stage" class="demo-stage round-corner-five shadow"> </div>
      </div>
      <div id="footer" class="shadow-inset">Site owned by <a href="http://www.yiransheng.com">Yiran Sheng</a>, powered by <a href="http://pages.github.com/">Github Pages</a></div>
  </body>
</html>
      </div>
  </body>
</html>
      </div>
  </body>
</html>
